<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="swfscAirDAS">
<title>Introduction to swfscAirDAS • swfscAirDAS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to swfscAirDAS">
<meta property="og:description" content="swfscAirDAS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">swfscAirDAS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/swfscAirDAS.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/smwoodman/swfscAirDAS/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to swfscAirDAS</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/smwoodman/swfscAirDAS/blob/HEAD/vignettes/swfscAirDAS.Rmd" class="external-link"><code>vignettes/swfscAirDAS.Rmd</code></a></small>
      <div class="d-none name"><code>swfscAirDAS.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span> <span class="co">#For printing output</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://smwoodman.github.io/swfscAirDAS/">swfscAirDAS</a></span><span class="op">)</span></span></code></pre></div>
<p>This document introduces you to the swfscAirDAS package. This package
is intended to standardize and streamline processing of aerial survey
DAS (AirDAS) data collected using the PHOCOENA, TURTLE, or CARETTA
programs from the Southwest Fisheries Science Center. In DAS data (and
thus AirDAS data), an event is only recorded when something changes or
happens, which can complicate processing. Thus, the main theme of this
package is enabling analyses and downstream processing by 1) determining
associated state and condition information for each event and 2) pulling
out event-specific information from the Data columns. The following
examples generally use the default function arguments; see the
documentation for the individual functions for a complete description of
all processing options.</p>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>This package includes a sample AirDAS file, which we will use in this
document. This file is formatted as a DAS file created using the TURTLE
program</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"airdas_sample.das"</span>, package <span class="op">=</span> <span class="st">"swfscAirDAS"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "  1C 123059 040915 N39:14.13 W123:09.38 Recorder: dd                                "</span></span>
<span><span class="co">#&gt; [2] "  2C 123059 040915 N39:14.13 W123:09.38 Not recording molas                         "</span></span>
<span><span class="co">#&gt; [3] "  3T.123059 040915 N39:14.13 W123:09.38   T1                                        "</span></span>
<span><span class="co">#&gt; [4] "  4V.123059 040915 N39:14.13 W123:09.38    g    g    g    g    g                    "</span></span>
<span><span class="co">#&gt; [5] "  5P.123059 040915 N39:14.13 W123:09.38   aa   bb   cc   dd                         "</span></span>
<span><span class="co">#&gt; [6] "  6A.123059 040915 N39:14.13 W123:09.38  650  100                                   "</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-data-format">Check data format<a class="anchor" aria-label="anchor" href="#check-data-format"></a>
</h2>
<p>The first step in processing AirDAS data is to ensure that the DAS
file has expected formatting and values, which you can do using the
<code>airdas_check</code> function. The checks performed by this
function are detailed in the function documentation, which can be
accessed by running <code><a href="../reference/airdas_check.html">?airdas_check</a></code>. If you aren’t sure of
the file type (format) of your data, you can check the format PDFs.
These PDFs are available online at <a href="https://smwoodman.github.io/swfscAirDAS/" class="uri">https://smwoodman.github.io/swfscAirDAS/</a>, or see
<code><a href="../reference/airdas_format_pdf.html">?airdas_format_pdf</a></code> for how to access a local copy.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Code not run</span></span>
<span><span class="va">y.check</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/airdas_check.html">airdas_check</a></span><span class="op">(</span><span class="va">y</span>, file.type <span class="op">=</span> <span class="st">"turtle"</span>, skip <span class="op">=</span> <span class="fl">0</span>, print.transect <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="read-and-process-data">Read and process data<a class="anchor" aria-label="anchor" href="#read-and-process-data"></a>
</h2>
<p>Once QA/QC is complete and you have fixed any data entry errors, you
can begin to process the AirDAS data. The backbone of this package is
the reading and processing steps: 1) the data from the DAS file are read
into the columns of a data frame and 2) state and condition information
are extracted for each event. This means that after processing, you can
simply look at any event (row) and determine the Beaufort, viewing
conditions, etc., at the time of the event. All other functions in the
package depend on the AirDAS data being in this processed state.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read </span></span>
<span><span class="va">y.read</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/airdas_read.html">airdas_read</a></span><span class="op">(</span><span class="va">y</span>, file.type <span class="op">=</span> <span class="st">"turtle"</span>, skip <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">y.read</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Event EffortDot            DateTime     Lat       Lon Data1 Data2 Data3 Data4</span></span>
<span><span class="co">#&gt; 1     C     FALSE 2015-04-09 12:30:59 39.2355 -123.1563  Reco rder:  dd    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2     C     FALSE 2015-04-09 12:30:59 39.2355 -123.1563  Not  recor ding  molas</span></span>
<span><span class="co">#&gt; 3     T      TRUE 2015-04-09 12:30:59 39.2355 -123.1563    T1  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4     V      TRUE 2015-04-09 12:30:59 39.2355 -123.1563     g     g     g     g</span></span>
<span><span class="co">#&gt; 5     P      TRUE 2015-04-09 12:30:59 39.2355 -123.1563    aa    bb    cc    dd</span></span>
<span><span class="co">#&gt; 6     A      TRUE 2015-04-09 12:30:59 39.2355 -123.1563   650   100  &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   Data5 Data6 Data7 EventNum          file_das line_num file_type</span></span>
<span><span class="co">#&gt; 1  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;        1 airdas_sample.das        1    turtle</span></span>
<span><span class="co">#&gt; 2  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;        2 airdas_sample.das        2    turtle</span></span>
<span><span class="co">#&gt; 3  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;        3 airdas_sample.das        3    turtle</span></span>
<span><span class="co">#&gt; 4     g  &lt;NA&gt;  &lt;NA&gt;        4 airdas_sample.das        4    turtle</span></span>
<span><span class="co">#&gt; 5  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;        5 airdas_sample.das        5    turtle</span></span>
<span><span class="co">#&gt; 6  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;        6 airdas_sample.das        6    turtle</span></span>
<span></span>
<span><span class="co"># Process</span></span>
<span><span class="va">y.proc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/airdas_process.html">airdas_process</a></span><span class="op">(</span><span class="va">y.read</span>, trans.upper <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">y.proc</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Event            DateTime     Lat       Lon OnEffort Trans Bft CCover Jelly</span></span>
<span><span class="co">#&gt; 1     C 2015-04-09 12:30:59 39.2355 -123.1563    FALSE  &lt;NA&gt;  NA     NA    NA</span></span>
<span><span class="co">#&gt; 2     C 2015-04-09 12:30:59 39.2355 -123.1563    FALSE  &lt;NA&gt;  NA     NA    NA</span></span>
<span><span class="co">#&gt; 3     T 2015-04-09 12:30:59 39.2355 -123.1563     TRUE    T1  NA     NA    NA</span></span>
<span><span class="co">#&gt; 4     V 2015-04-09 12:30:59 39.2355 -123.1563     TRUE    T1  NA     NA    NA</span></span>
<span><span class="co">#&gt; 5     P 2015-04-09 12:30:59 39.2355 -123.1563     TRUE    T1  NA     NA    NA</span></span>
<span><span class="co">#&gt; 6     A 2015-04-09 12:30:59 39.2355 -123.1563     TRUE    T1  NA     NA    NA</span></span>
<span><span class="co">#&gt;   HorizSun VertSun  HKR  Haze  Kelp RedTide AltFt SpKnot ObsL ObsB ObsR  Rec</span></span>
<span><span class="co">#&gt; 1       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA   aa   bb   cc   dd</span></span>
<span><span class="co">#&gt; 6       NA      NA &lt;NA&gt; FALSE FALSE   FALSE   650    100   aa   bb   cc   dd</span></span>
<span><span class="co">#&gt;    VLI  VLO   VB  VRI  VRO Data1 Data2 Data3 Data4 Data5 Data6 Data7 EffortDot</span></span>
<span><span class="co">#&gt; 1 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  Reco rder:  dd    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     FALSE</span></span>
<span><span class="co">#&gt; 2 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  Not  recor ding  molas  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     FALSE</span></span>
<span><span class="co">#&gt; 3 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;    T1  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE</span></span>
<span><span class="co">#&gt; 4    g    g    g    g    g     g     g     g     g     g  &lt;NA&gt;  &lt;NA&gt;      TRUE</span></span>
<span><span class="co">#&gt; 5    g    g    g    g    g    aa    bb    cc    dd  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE</span></span>
<span><span class="co">#&gt; 6    g    g    g    g    g   650   100  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE</span></span>
<span><span class="co">#&gt;   EventNum          file_das line_num file_type</span></span>
<span><span class="co">#&gt; 1        1 airdas_sample.das        1    turtle</span></span>
<span><span class="co">#&gt; 2        2 airdas_sample.das        2    turtle</span></span>
<span><span class="co">#&gt; 3        3 airdas_sample.das        3    turtle</span></span>
<span><span class="co">#&gt; 4        4 airdas_sample.das        4    turtle</span></span>
<span><span class="co">#&gt; 5        5 airdas_sample.das        5    turtle</span></span>
<span><span class="co">#&gt; 6        6 airdas_sample.das        6    turtle</span></span></code></pre></div>
<p>Once you have processed the AirDAS data, you can easily access a
variety of information. For instance, you can look at the different
Beaufort values that occurred in the data, or filter for specific events
to get the beginning and ending points of each effort section.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The number of events per Beaufort value</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">y.proc</span><span class="op">$</span><span class="va">Bft</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  1  2 </span></span>
<span><span class="co">#&gt; 58 19</span></span>
<span></span>
<span><span class="co"># Filter for T/R and O/E events to extract lat/lon points</span></span>
<span><span class="va">y.proc</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Event</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T"</span>, <span class="st">"R"</span>, <span class="st">"E"</span>, <span class="st">"O"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Event</span>, <span class="va">Lat</span>, <span class="va">Lon</span>, <span class="va">Trans</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Event      Lat       Lon Trans</span></span>
<span><span class="co">#&gt; 1     T 39.23550 -123.1563    T1</span></span>
<span><span class="co">#&gt; 2     E 39.23400 -123.4047    T1</span></span>
<span><span class="co">#&gt; 3     R 39.23400 -123.4742    T1</span></span>
<span><span class="co">#&gt; 4     O 39.23283 -123.6033  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5     T 39.22000 -123.6078    T2</span></span>
<span><span class="co">#&gt; 6     O 39.21700 -123.2417  &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="sightings">Sightings<a class="anchor" aria-label="anchor" href="#sightings"></a>
</h2>
<p>The <code>swfscAirDAS</code> package does contain specific functions
for extracting and/or summarizing particular information from the
processed data. First is <code>airdas_sight</code>, a function that
returns a data frame with pertinent sighting data extracted to their own
columns</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y.sight</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/airdas_sight.html">airdas_sight</a></span><span class="op">(</span><span class="va">y.proc</span><span class="op">)</span></span>
<span></span>
<span><span class="va">y.sight</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Event</span>, <span class="va">SightNo</span><span class="op">:</span><span class="va">TurtleTail</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Event SightNo Obs Angle ObsStd SightStd Mixed SpCode GsTotal GsSp TurtleSize</span></span>
<span><span class="co">#&gt; 1     S       1  cc    67   TRUE     TRUE FALSE     mn       6    6         NA</span></span>
<span><span class="co">#&gt; 2     S       2  bb   -60   TRUE     TRUE FALSE     mn       6    6         NA</span></span>
<span><span class="co">#&gt; 3     S       3  cc    38   TRUE     TRUE FALSE     mn       2    2         NA</span></span>
<span><span class="co">#&gt; 4     S       4  aa   -50   TRUE     TRUE FALSE     mn       5    5         NA</span></span>
<span><span class="co">#&gt; 5     S       5  cc    49   TRUE     TRUE FALSE     bm       4    4         NA</span></span>
<span><span class="co">#&gt; 6     S       6  cc    42   TRUE     TRUE  TRUE     gg      10    8         NA</span></span>
<span><span class="co">#&gt;   TurtleDirection TurtleTail</span></span>
<span><span class="co">#&gt; 1              NA       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2              NA       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3              NA       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4              NA       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5              NA       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6              NA       &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="effort">Effort<a class="anchor" aria-label="anchor" href="#effort"></a>
</h2>
<p>In addition, you can chop the effort data into segments, and
summarize the conditions and sightings on those segments using
<code>airdas_effort</code> and <code>airdas_effort_sight</code>. These
effort segments can be used for line transect estimates using the
Distance software, species distribution modeling, or summarizing the
number of harbor porpoises on each transect, among other uses.
<code>airdas_effort</code> chops continuous effort sections (the event
sequence from T/R to E/O events) into effort segments using one of
several different chopping methods: condition (a new effort segment
every time a condition changes), equal length (effort segments of equal
length), and section (each segment is a full continuous effort section,
i.e. it runs from a T/R event to an E/O event).
<code>airdas_effort_sight</code> takes the output of
<code>airdas_effort</code> and returns the number of sightings and
animals per segment for specified species codes.</p>
<p>Both functions return a list of three data frames: segdata,
sightinfo, and randpicks. Briefly, as these data frames and the
different chopping methodologies are described in depth in the function
documentation (<code><a href="../reference/airdas_effort.html">?airdas_effort</a></code> and
<code><a href="../reference/airdas_effort_sight.html">?airdas_effort_sight</a></code>), segdata contains information about
each effort segment, sightinfo contains information about the sightings
on the segments, and randpicks contains information specific to the
‘equal length’ chopping method. These are separate functions to allow
the user more control over the filters applied to determine which
sightings should be included in the summaries (see
<code><a href="../reference/airdas_effort.html">?airdas_effort</a></code>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Chop the effort every time a condition changes</span></span>
<span><span class="va">y.eff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/airdas_effort.html">airdas_effort</a></span><span class="op">(</span></span>
<span>  <span class="va">y.proc</span>, method <span class="op">=</span> <span class="st">"condition"</span>, seg.min.km <span class="op">=</span> <span class="fl">0</span>, </span>
<span>  dist.method <span class="op">=</span> <span class="st">"greatcircle"</span>, conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Bft"</span>, <span class="st">"CCover"</span><span class="op">)</span>, </span>
<span>  num.cores <span class="op">=</span> <span class="fl">1</span>, angle.min <span class="op">=</span> <span class="fl">12</span>, bft.max <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="va">y.eff.sight</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/airdas_effort_sight.html">airdas_effort_sight</a></span><span class="op">(</span><span class="va">y.eff</span>, sp.codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bm"</span>, <span class="st">"dc"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">y.eff.sight</span><span class="op">$</span><span class="va">segdata</span><span class="op">)</span></span>
<span><span class="co">#&gt;   segnum section_id section_sub_id event transect              file stlin</span></span>
<span><span class="co">#&gt; 1      1          1              1     T       T1 airdas_sample.das     3</span></span>
<span><span class="co">#&gt; 2      2          1              2     T       T1 airdas_sample.das    36</span></span>
<span><span class="co">#&gt; 3      3          2              1     R       T1 airdas_sample.das    40</span></span>
<span><span class="co">#&gt; 4      4          2              2     R       T1 airdas_sample.das    41</span></span>
<span><span class="co">#&gt; 5      5          2              3     R       T1 airdas_sample.das    44</span></span>
<span><span class="co">#&gt; 6      6          3              1     T       T2 airdas_sample.das    53</span></span>
<span><span class="co">#&gt;   endlin     lat1      lon1           DateTime1     lat2      lon2</span></span>
<span><span class="co">#&gt; 1     36 39.23550 -123.1563 2015-04-09 12:30:59 39.23400 -123.4033</span></span>
<span><span class="co">#&gt; 2     37 39.23400 -123.4033 2015-04-09 12:37:57 39.23400 -123.4047</span></span>
<span><span class="co">#&gt; 3     41 39.23400 -123.4742 2015-04-09 12:40:00 39.23333 -123.4914</span></span>
<span><span class="co">#&gt; 4     44 39.23333 -123.4914 2015-04-09 12:40:28 39.23317 -123.5143</span></span>
<span><span class="co">#&gt; 5     49 39.23317 -123.5143 2015-04-09 12:41:08 39.23283 -123.6032</span></span>
<span><span class="co">#&gt; 6     78 39.22000 -123.6078 2015-04-09 12:46:51 39.21683 -123.3605</span></span>
<span><span class="co">#&gt;             DateTime2     mlat      mlon           mDateTime    dist year month</span></span>
<span><span class="co">#&gt; 1 2015-04-09 12:37:57 39.23309 -123.2797 2015-04-09 12:34:28 21.2882 2015     4</span></span>
<span><span class="co">#&gt; 2 2015-04-09 12:38:00 39.23400 -123.4040 2015-04-09 12:37:58  0.1148 2015     4</span></span>
<span><span class="co">#&gt; 3 2015-04-09 12:40:28 39.23367 -123.4828 2015-04-09 12:40:14  1.4937 2015     4</span></span>
<span><span class="co">#&gt; 4 2015-04-09 12:41:08 39.23317 -123.5029 2015-04-09 12:40:48  1.9657 2015     4</span></span>
<span><span class="co">#&gt; 5 2015-04-09 12:43:43 39.23245 -123.5588 2015-04-09 12:42:25  7.6620 2015     4</span></span>
<span><span class="co">#&gt; 6 2015-04-09 12:54:04 39.21667 -123.4842 2015-04-09 12:50:27 21.3146 2015     4</span></span>
<span><span class="co">#&gt;   day    mtime maxdistBft maxdistCCover nSI_bm ANI_bm nSI_dc ANI_dc</span></span>
<span><span class="co">#&gt; 1   9 12:34:28          1            10      2      9      1      1</span></span>
<span><span class="co">#&gt; 2   9 12:37:58          2            10      0      0      0      0</span></span>
<span><span class="co">#&gt; 3   9 12:40:14          2            10      0      0      0      0</span></span>
<span><span class="co">#&gt; 4   9 12:40:48          2            20      0      0      0      0</span></span>
<span><span class="co">#&gt; 5   9 12:42:25          1            20      0      0      0      0</span></span>
<span><span class="co">#&gt; 6   9 12:50:27          1            20      2      7      0      0</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">y.eff.sight</span><span class="op">$</span><span class="va">sightinfo</span><span class="op">)</span></span>
<span><span class="co">#&gt;   segnum     mlat      mlon Event            DateTime      Lat       Lon</span></span>
<span><span class="co">#&gt; 1      1 39.23309 -123.2797     S 2015-04-09 12:31:35 39.23367 -123.1783</span></span>
<span><span class="co">#&gt; 2      1 39.23309 -123.2797     S 2015-04-09 12:31:47 39.23350 -123.1857</span></span>
<span><span class="co">#&gt; 3      1 39.23309 -123.2797     S 2015-04-09 12:31:56 39.23333 -123.1917</span></span>
<span><span class="co">#&gt; 4      1 39.23309 -123.2797     S 2015-04-09 12:32:20 39.23233 -123.2053</span></span>
<span><span class="co">#&gt; 5      1 39.23309 -123.2797     S 2015-04-09 12:32:30 39.23233 -123.2108</span></span>
<span><span class="co">#&gt; 6      1 39.23309 -123.2797     S 2015-04-09 12:32:42 39.23233 -123.2195</span></span>
<span><span class="co">#&gt;   OnEffort Trans Bft CCover Jelly HorizSun VertSun HKR  Haze  Kelp RedTide</span></span>
<span><span class="co">#&gt; 1     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span><span class="co">#&gt; 2     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span><span class="co">#&gt; 3     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span><span class="co">#&gt; 4     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span><span class="co">#&gt; 5     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span><span class="co">#&gt; 6     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span><span class="co">#&gt;   AltFt SpKnot ObsL ObsB ObsR Rec VLI VLO VB VRI VRO EffortDot EventNum</span></span>
<span><span class="co">#&gt; 1   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE        9</span></span>
<span><span class="co">#&gt; 2   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE       10</span></span>
<span><span class="co">#&gt; 3   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE       12</span></span>
<span><span class="co">#&gt; 4   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE       14</span></span>
<span><span class="co">#&gt; 5   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE       15</span></span>
<span><span class="co">#&gt; 6   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE       16</span></span>
<span><span class="co">#&gt;            file_das line_num file_type SightNo Obs Angle ObsStd SightStd Mixed</span></span>
<span><span class="co">#&gt; 1 airdas_sample.das        9    turtle       1  cc    67   TRUE     TRUE FALSE</span></span>
<span><span class="co">#&gt; 2 airdas_sample.das       10    turtle       2  bb   -60   TRUE     TRUE FALSE</span></span>
<span><span class="co">#&gt; 3 airdas_sample.das       12    turtle       3  cc    38   TRUE     TRUE FALSE</span></span>
<span><span class="co">#&gt; 4 airdas_sample.das       14    turtle       4  aa   -50   TRUE     TRUE FALSE</span></span>
<span><span class="co">#&gt; 5 airdas_sample.das       15    turtle       5  cc    49   TRUE     TRUE FALSE</span></span>
<span><span class="co">#&gt; 6 airdas_sample.das       16    turtle       6  cc    42   TRUE     TRUE  TRUE</span></span>
<span><span class="co">#&gt;   SpCode GsTotal GsSp TurtleSize TurtleDirection TurtleTail included</span></span>
<span><span class="co">#&gt; 1     mn       6    6         NA              NA       &lt;NA&gt;    FALSE</span></span>
<span><span class="co">#&gt; 2     mn       6    6         NA              NA       &lt;NA&gt;    FALSE</span></span>
<span><span class="co">#&gt; 3     mn       2    2         NA              NA       &lt;NA&gt;    FALSE</span></span>
<span><span class="co">#&gt; 4     mn       5    5         NA              NA       &lt;NA&gt;    FALSE</span></span>
<span><span class="co">#&gt; 5     bm       4    4         NA              NA       &lt;NA&gt;     TRUE</span></span>
<span><span class="co">#&gt; 6     gg      10    8         NA              NA       &lt;NA&gt;    FALSE</span></span></code></pre></div>
<p>If you wanted to determine the number of humpback whales on each
transect with a sighting angle between -60 and 60 degrees, for instance,
you could do the following</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 'Chop' the effort by continuous effort section</span></span>
<span><span class="va">y.eff.section</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/airdas_effort.html">airdas_effort</a></span><span class="op">(</span></span>
<span>  <span class="va">y.proc</span>, method <span class="op">=</span> <span class="st">"section"</span>, dist.method <span class="op">=</span> <span class="st">"greatcircle"</span>, conditions <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>  num.cores <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="va">y.eff.section</span><span class="op">$</span><span class="va">sightinfo</span> <span class="op">&lt;-</span> <span class="va">y.eff.section</span><span class="op">$</span><span class="va">sightinfo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>included <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">SpCode</span> <span class="op">==</span> <span class="st">"mn"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">Angle</span> <span class="op">&gt;</span> <span class="fl">60</span><span class="op">)</span>, <span class="cn">FALSE</span>, <span class="va">.data</span><span class="op">$</span><span class="va">included</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">y.eff.section.sight</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/airdas_effort_sight.html">airdas_effort_sight</a></span><span class="op">(</span><span class="va">y.eff.section</span>, sp.codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mn"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">y.eff.section.sight</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>transect_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">event</span> <span class="op">==</span> <span class="st">"T"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">transect_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>dist_sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">dist</span><span class="op">)</span>, </span>
<span>            mn_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ANI_mn</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#for printing format</span></span>
<span><span class="co">#&gt;   transect_id dist_sum mn_count</span></span>
<span><span class="co">#&gt; 1           1  32.5244       20</span></span>
<span><span class="co">#&gt; 2           2  31.5482       18</span></span></code></pre></div>
<p>In this example you could also simply group by the
<code>transect</code> column, but that structure is not robust to
analyzing multi-year data sets where the same transects are flown
multiple times.</p>
</div>
<div class="section level2">
<h2 id="comments">Comments<a class="anchor" aria-label="anchor" href="#comments"></a>
</h2>
<p>In AirDAS data, comments are a catch-all field, meaning they are used
to record information that does not fit neatly into the AirDAS
framework. For instance, users will often enter a comment indicating if
they are or are not recording extra information such as mola mola
sightings. Again, this information is not recorded in a systematic way,
but you can still use swfscAirDAS functions to determine this
information.</p>
<p>A comment indicating whether or not something is being recorded will
likely contain “record” somewhere in the comment. Thus, you can use
<code>airdas_comments</code> to extract comments, and then subset for
comments that contain the pattern “record”.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y.comm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/airdas_comments.html">airdas_comments</a></span><span class="op">(</span><span class="va">y.proc</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">y.comm</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Event            DateTime      Lat       Lon OnEffort Trans Bft CCover Jelly</span></span>
<span><span class="co">#&gt; 1      C 2015-04-09 12:30:59 39.23550 -123.1563    FALSE  &lt;NA&gt;  NA     NA    NA</span></span>
<span><span class="co">#&gt; 2      C 2015-04-09 12:30:59 39.23550 -123.1563    FALSE  &lt;NA&gt;  NA     NA    NA</span></span>
<span><span class="co">#&gt; 11     C 2015-04-09 12:31:48 39.23350 -123.1857     TRUE    T1   1     10     0</span></span>
<span><span class="co">#&gt; 22     C 2015-04-09 12:34:56 39.23317 -123.2968     TRUE    T1   1     10     2</span></span>
<span><span class="co">#&gt; 25     C 2015-04-09 12:35:32 39.23317 -123.3178     TRUE    T1   1     10     2</span></span>
<span><span class="co">#&gt; 37     C 2015-04-09 12:38:00 39.23400 -123.4047    FALSE    T1   2     10     0</span></span>
<span><span class="co">#&gt;    HorizSun VertSun  HKR  Haze  Kelp RedTide AltFt SpKnot ObsL ObsB ObsR  Rec</span></span>
<span><span class="co">#&gt; 1        NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2        NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 11        6      NA    n FALSE FALSE   FALSE   650    100   aa   bb   cc   dd</span></span>
<span><span class="co">#&gt; 22        6      NA    r FALSE FALSE    TRUE   650    100   aa   bb   cc   dd</span></span>
<span><span class="co">#&gt; 25        6      NA    r FALSE FALSE    TRUE   650    100   aa   bb   cc   dd</span></span>
<span><span class="co">#&gt; 37        6      NA    n FALSE FALSE   FALSE   650    100   aa   bb   cc   dd</span></span>
<span><span class="co">#&gt;     VLI  VLO   VB  VRI  VRO Data1 Data2 Data3 Data4 Data5 Data6           Data7</span></span>
<span><span class="co">#&gt; 1  &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  Reco rder:  dd    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  Not  recor ding  molas  &lt;NA&gt;  &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 11    g    g    g    g    g  2 cp  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 22    g    g    g    g    g  stre aky r ed ti de     &lt;NA&gt;  &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 25    g    g    g    g    g  shar k 11f t      &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 37    g    g    g    g    g  off  effor t to  circl e on  unide ntifed object  </span></span>
<span><span class="co">#&gt;    EffortDot EventNum          file_das line_num file_type</span></span>
<span><span class="co">#&gt; 1      FALSE        1 airdas_sample.das        1    turtle</span></span>
<span><span class="co">#&gt; 2      FALSE        2 airdas_sample.das        2    turtle</span></span>
<span><span class="co">#&gt; 11      TRUE       11 airdas_sample.das       11    turtle</span></span>
<span><span class="co">#&gt; 22      TRUE       21 airdas_sample.das       22    turtle</span></span>
<span><span class="co">#&gt; 25      TRUE       24 airdas_sample.das       25    turtle</span></span>
<span><span class="co">#&gt; 37     FALSE       37 airdas_sample.das       38    turtle</span></span>
<span><span class="co">#&gt;                                      comment_str</span></span>
<span><span class="co">#&gt; 1                                 Recorder: dd  </span></span>
<span><span class="co">#&gt; 2                            Not recording molas</span></span>
<span><span class="co">#&gt; 11                                          2 cp</span></span>
<span><span class="co">#&gt; 22                           streaky red tide   </span></span>
<span><span class="co">#&gt; 25                                shark 11ft    </span></span>
<span><span class="co">#&gt; 37  off effort to circle on unidentifed object</span></span>
<span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html" class="external-link">str_subset</a></span><span class="op">(</span><span class="va">y.comm</span><span class="op">$</span><span class="va">comment_str</span>, <span class="st">"record"</span><span class="op">)</span> <span class="co">#Could also use grepl() here</span></span>
<span><span class="co">#&gt; [1] " Not recording molas"</span></span></code></pre></div>
<p>You can extract data from ‘systematic’ comments, using
<code>airdas_comments_process</code>. This function supports both the
codes of TURTLE/PHOCOENA data, and the text string format of CARETTA
data. Specifically, it includes a <code>comment.format</code> argument
for users with CARETTA data, which allows you to provide a list
specifying how the data was recorded, although the data must be
separated by a delimiter. See below for the <code>comment.format</code>
value for default CARETTA data. This function also by default looks for
codes, e.g. “fb” or “cp”, in TURTLE/PHOCOENA data; see
<code><a href="../reference/airdas_comments_process.html">?airdas_comments_process</a></code> for more details.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># comment.format for default CARETTA data</span></span>
<span><span class="va">comment.format</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">5</span>, sep <span class="op">=</span> <span class="st">";"</span>, </span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"character"</span>, <span class="st">"character"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"character"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># TURTLE/PHOCOENA comment-data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/airdas_comments_process.html">airdas_comments_process</a></span><span class="op">(</span><span class="va">y.proc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Event            DateTime      Lat       Lon OnEffort Trans Bft CCover Jelly</span></span>
<span><span class="co">#&gt; 1     C 2015-04-09 12:31:48 39.23350 -123.1857     TRUE    T1   1     10     0</span></span>
<span><span class="co">#&gt; 2     C 2015-04-09 12:42:01 39.23267 -123.5433     TRUE    T1   1     20     0</span></span>
<span><span class="co">#&gt; 3     C 2015-04-09 12:42:01 39.23267 -123.5433     TRUE    T1   1     20     0</span></span>
<span><span class="co">#&gt;   HorizSun VertSun HKR  Haze  Kelp RedTide AltFt SpKnot ObsL ObsB ObsR Rec VLI</span></span>
<span><span class="co">#&gt; 1        6      NA   n FALSE FALSE   FALSE   650    100   aa   bb   cc  dd   g</span></span>
<span><span class="co">#&gt; 2        6      NA   n FALSE FALSE   FALSE   650    100   aa   bb   cc  dd   g</span></span>
<span><span class="co">#&gt; 3        6      NA   n FALSE FALSE   FALSE   650    100   aa   bb   cc  dd   g</span></span>
<span><span class="co">#&gt;   VLO VB VRI VRO Data1 Data2 Data3 Data4 Data5 Data6 Data7 EffortDot EventNum</span></span>
<span><span class="co">#&gt; 1   g  g   g   g  2 cp  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE       11</span></span>
<span><span class="co">#&gt; 2   g  g   g   g  fb2s  fb1m  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE       45</span></span>
<span><span class="co">#&gt; 3   g  g   g   g  fb2s  fb1m  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE       45</span></span>
<span><span class="co">#&gt;            file_das line_num file_type comment_str     Misc1 Misc2 Value</span></span>
<span><span class="co">#&gt; 1 airdas_sample.das       11    turtle        2 cp  crab pot  &lt;NA&gt;     2</span></span>
<span><span class="co">#&gt; 2 airdas_sample.das       46    turtle   fb2s fb1m fish ball     s     2</span></span>
<span><span class="co">#&gt; 3 airdas_sample.das       46    turtle   fb2s fb1m fish ball     m     1</span></span>
<span><span class="co">#&gt;   flag_check</span></span>
<span><span class="co">#&gt; 1      FALSE</span></span>
<span><span class="co">#&gt; 2      FALSE</span></span>
<span><span class="co">#&gt; 3      FALSE</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Sam Woodman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
