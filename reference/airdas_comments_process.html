<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Process comments in AirDAS data — airdas_comments_process • swfscAirDAS</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Process comments in AirDAS data — airdas_comments_process"><meta name="description" content="Extract miscellaneous information recorded in AirDAS data comments, i.e. comment-data"><meta property="og:description" content="Extract miscellaneous information recorded in AirDAS data comments, i.e. comment-data"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">swfscAirDAS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/swfscAirDAS.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/swfsc/swfscAirDAS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Process comments in AirDAS data</h1>
      <small class="dont-index">Source: <a href="https://github.com/swfsc/swfscAirDAS/blob/main/R/airdas_comments_process.R" class="external-link"><code>R/airdas_comments_process.R</code></a></small>
      <div class="d-none name"><code>airdas_comments_process.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extract miscellaneous information recorded in AirDAS data comments, i.e. comment-data</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">airdas_comments_process</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">airdas_comments_process</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'airdas_dfr'</span></span>
<span><span class="fu">airdas_comments_process</span><span class="op">(</span><span class="va">x</span>, comment.format <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'airdas_df'</span></span>
<span><span class="fu">airdas_comments_process</span><span class="op">(</span><span class="va">x</span>, comment.format <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p><code>airdas_dfr</code> or <code>airdas_df</code> object,
or a data frame that can be coerced to a <code>airdas_dfr</code> object</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>ignored</p></dd>


<dt id="arg-comment-format">comment.format<a class="anchor" aria-label="anchor" href="#arg-comment-format"></a></dt>
<dd><p>list; default is <code>NULL</code>.
See the 'Using <code>comment.format</code>' section</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>x</code>, filtered for comments with recorded data,
  with the following columns added:</p><ul><li><p>comment_str: the full comment string</p></li>
<li><p>Misc#: Some number of descriptor columns. There should be <code>n</code> columns,
      although the minimum number will be two columns</p></li>
<li><p>Value: Associated count or percentage for TURTLE/PHOCOENA data</p></li>
<li><p>flag_check: logical indicating if the TURTLE/PHOCOENA
      comment string was longer than an expected number of characters,
      and thus should be manually inspected</p></li>
</ul><p>See the additional sections for more context.
  If <code>comment.format</code> is <code>NULL</code>,
  then the output data frame would two Misc# columns:
  a level one descriptor, e.g. "Fish ball" or "Jellyfish",
  and a level two descriptor, e.g. s, m, or c.
  However, if <code>comment.format$n</code> is say 4, then the output data frame would have
  columns Misc1, Misc2, Misc3, and Misc4.</p>
<p>Messages are printed if either <code>comment.format</code> is not <code>NULL</code>
  and not comment-data is identified using <code>comment.format</code>, or if
  <code>x</code> has TURTLE/PHOCOENA data but no TURTLE/PHOCOENA comment-data</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Historically, project-specific or miscellaneous data have been
  recorded in AirDAS comments using specific formats and character codes.
  This functions identifies and extracts this data from the comment text strings.
  However, different data types have different comment-data formats.
  Specifically, TURTLE and PHOCOENA comment-data uses identifier codes
  that each signify a certain data pattern, while other comment-data
  (usually that of CARETTA) uses data separated by some delimiter.</p>
    </div>
    <div class="section level2">
    <h2 id="turtle-and-phocoena-comment-data">TURTLE and PHOCOENA comment-data<a class="anchor" aria-label="anchor" href="#turtle-and-phocoena-comment-data"></a></h2>



<p>Current supported data types are: fish balls, molas, jellyfish, and crab pots.
  See any of the AirDAS format PDFs (<code><a href="airdas_format_pdf.html">airdas_format_pdf</a></code>)
  for information about the specific codes and formats used to
  record this data. All comments are converted to lower case for processing
  to avoid missing data.</p>
<p>These different codes contain (at most):
  a level one descriptor (e.g. fish ball or crab pot),
  a level two descriptor (e.g. size or jellyfish species),
  and a value (a count or percentage).
  Thus, the extracted data are returned together in this structure.
  The output data frame is long data, i.e. it has one piece of information per line.
  For instance, if the comment is "fb1s fb1m", then the output data frame
  will have one line for the small fish ball and one for the medium fish ball.
  See Value section for more details.</p>
<p>Currently this function only recognizes mola data recorded using the
  "m1", "m2", and "m3" codes (small, medium, and large mola, respectively).
  Thus, "mola" is not recognized and processed.</p>
<p>The following codes are used for the level two descriptors:</p><table class="table table"><tr><td><em>Description</em></td><td><em>Code</em></td></tr><tr><td>Small</td><td>s</td></tr><tr><td>Medium</td><td>m</td></tr><tr><td>Large</td><td>l</td></tr><tr><td>Unknown</td><td>u</td></tr><tr><td>Chrysaora</td><td>c</td></tr><tr><td>Moon jelly</td><td>m</td></tr><tr><td>Egg yolk</td><td>e</td></tr><tr><td>Other</td><td>o</td></tr></table></div>
    <div class="section level2">
    <h2 id="using-comment-format">Using <code>comment.format</code><a class="anchor" aria-label="anchor" href="#using-comment-format"></a></h2>



<p><code>comment.format</code> is a list that allows the user to specify the comment-data format.
 To use this argument, data must be separated by a delimiter.
 This list must contain three named elements:</p><ul><li><p>n: A single number indicating the number of elements of data in each comment.
     Must equal the length of <code>type</code>.
     A comment must contain exactly this number of <code>sep</code> to be recognized as comment-data</p></li>
<li><p>sep: A single string indicating the field separator string (delimiter).
     Values within each comment are separated by this string.
     Currently accepted values are ";" and ","</p></li>
<li><p>type: A character vector of length <code>n</code> indicating the data type of
     each data element (column).
     All values must be one of: "character", "numeric", or "integer".</p></li>
</ul><p>For instance, for most CARETTA data <code>comment.format</code> should be
 <code>list(n = 5, sep = ";", type = c("character", "character", "numeric", "numeric", "character"))</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"airdas_sample.das"</span>, package <span class="op">=</span> <span class="st">"swfscAirDAS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y.proc</span> <span class="op">&lt;-</span> <span class="fu"><a href="airdas_process.html">airdas_process</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">airdas_comments_process</span><span class="op">(</span><span class="va">y.proc</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Event            DateTime      Lat       Lon OnEffort Trans Bft CCover Jelly</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     C 2015-04-09 12:31:48 39.23350 -123.1857     TRUE    T1   1     10     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     C 2015-04-09 12:42:01 39.23267 -123.5433     TRUE    T1   1     20     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     C 2015-04-09 12:42:01 39.23267 -123.5433     TRUE    T1   1     20     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   HorizSun VertSun HKR  Haze  Kelp RedTide AltFt SpKnot ObsL ObsB ObsR Rec VLI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        6      NA   n FALSE FALSE   FALSE   650    100   aa   bb   cc  dd   g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        6      NA   n FALSE FALSE   FALSE   650    100   aa   bb   cc  dd   g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        6      NA   n FALSE FALSE   FALSE   650    100   aa   bb   cc  dd   g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   VLO VB VRI VRO Data1 Data2 Data3 Data4 Data5 Data6 Data7 EffortDot EventNum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   g  g   g   g  2 cp  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE       11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   g  g   g   g  fb2s  fb1m  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE       45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   g  g   g   g  fb2s  fb1m  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE       45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            file_das line_num file_type comment_str     Misc1 Misc2 Value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 airdas_sample.das       11    turtle        2 cp  crab pot  &lt;NA&gt;     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 airdas_sample.das       46    turtle   fb2s fb1m fish ball     s     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 airdas_sample.das       46    turtle   fb2s fb1m fish ball     m     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   flag_check</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      FALSE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sam Woodman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

