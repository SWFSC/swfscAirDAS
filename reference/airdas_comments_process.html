<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Process comments in AirDAS data — airdas_comments_process • swfscAirDAS</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Process comments in AirDAS data — airdas_comments_process" />
<meta property="og:description" content="Extract miscellaneous information recorded in AirDAS data comments, i.e. comment-data" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">swfscAirDAS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/swfscAirDAS.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/smwoodman/swfscAirDAS/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Process comments in AirDAS data</h1>
    <small class="dont-index">Source: <a href='https://github.com/smwoodman/swfscAirDAS/blob/master/R/airdas_comments_process.R'><code>R/airdas_comments_process.R</code></a></small>
    <div class="hidden name"><code>airdas_comments_process.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extract miscellaneous information recorded in AirDAS data comments, i.e. comment-data</p>
    </div>

    <pre class="usage"><span class='fu'>airdas_comments_process</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>airdas_comments_process</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for airdas_dfr</span>
<span class='fu'>airdas_comments_process</span>(<span class='no'>x</span>, <span class='kw'>comment.format</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='co'># S3 method for airdas_df</span>
<span class='fu'>airdas_comments_process</span>(<span class='no'>x</span>, <span class='kw'>comment.format</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code>airdas_dfr</code> or <code>airdas_df</code> object, 
or a data frame that can be coerced to a <code>airdas_dfr</code> object</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>ignored</p></td>
    </tr>
    <tr>
      <th>comment.format</th>
      <td><p>list; default is <code>NULL</code>. 
See the 'Using <code>comment.format</code>' section</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>x</code>, filtered for comments with recorded data, 
  with the following columns added:</p><ul>
<li><p>comment_str: the full comment string</p></li>
<li><p>Misc#: Some number of descriptor columns. There should be <code>n</code> columns, 
      although the minimum number will be two columns</p></li>
<li><p>Value: Associated count or percentage for TURTLE/PHOCOENA data</p></li>
<li><p>flag_check: logical indicating if the TURTLE/PHOCOENA 
      comment string was longer than an expected number of characters, 
      and thus should be manually inspected</p></li>
</ul>
  
<p>See the additional sections for more context. 
  If <code>comment.format</code> is <code>NULL</code>, 
  then the output data frame would two Misc# columns: 
  a level one descriptor, e.g. "Fish ball" or "Jellyfish", 
  and a level two descriptor, e.g. s, m, or c. 
  However, if <code>comment.format$n</code> is say 4, then the output data frame would have
  columns Misc1, Misc2, Misc3, and Misc4.</p>  
<p>Messages are printed if either <code>comment.format</code> is not <code>NULL</code>
  and not comment-data is identified using <code>comment.format</code>, or if 
  <code>x</code> has TURTLE/PHOCOENA data but no TURTLE/PHOCOENA comment-data</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Historically, project-specific or miscellaneous data have been 
  recorded in AirDAS comments using specific formats and character codes. 
  This functions identifies and extracts this data from the comment text strings. 
  However, different data types have different comment-data formats. 
  Specifically, TURTLE and PHOCOENA comment-data uses identifier codes 
  that each signify a certain data pattern, while other comment-data
  (usually that of CARETTA) uses data separated by some delimiter.</p>
    <h2 class="hasAnchor" id="turtle-and-phocoena-comment-data"><a class="anchor" href="#turtle-and-phocoena-comment-data"></a>TURTLE and PHOCOENA comment-data</h2>

    
 

<p>Current supported data types are: fish balls, molas, jellyfish, and crab pots. 
  See any of the AirDAS format PDFs (<code><a href='airdas_format_pdf.html'>airdas_format_pdf</a></code>) 
  for information about the specific codes and formats used to
  record this data. All comments are converted to lower case for processing 
  to avoid missing data.</p>  
<p>These different codes contain (at most):
  a level one descriptor (e.g. fish ball or crab pot), 
  a level two descriptor (e.g. size or jellyfish species), 
  and a value (a count or percentage). 
  Thus, the extracted data are returned together in this structure. 
  The output data frame is long data, i.e. it has one piece of information per line.
  For instance, if the comment is "fb1s fb1m", then the output data frame
  will have one line for the small fish ball and one for the medium fish ball. 
  See Value section for more details.</p>  
<p>Currently this function only recognizes mola data recorded using the 
  "m1", "m2", and "m3" codes (small, medium, and large mola, respectively). 
  Thus, "mola" is not recognized and processed.</p>  
<p>The following codes are used for the level two descriptors:</p><table class='table'>
<tr><td><em>Description</em></td><td><em>Code</em></td></tr>
<tr><td>Small</td><td>s</td></tr>
<tr><td>Medium</td><td>m</td></tr>
<tr><td>Large</td><td>l</td></tr>
<tr><td>Unknown</td><td>u</td></tr>
<tr><td>Chrysaora</td><td>c</td></tr>
<tr><td>Moon jelly</td><td>m</td></tr>
<tr><td>Egg yolk</td><td>e</td></tr>
<tr><td>Other</td><td>o</td></tr>
</table>


    <h2 class="hasAnchor" id="using-comment-format"><a class="anchor" href="#using-comment-format"></a>Using <code>comment.format</code></h2>

    
 

<p><code>comment.format</code> is a list that allows the user to specify the comment-data format. 
 To use this argument, data must be separated by a delimiter. 
 This list must contain three named elements:</p><ul>
<li><p>n: A single number indicating the number of elements of data in each comment. 
     Must equal the length of <code>type</code>. 
     A comment must contain exactly this number of <code>sep</code> to be recognized as comment-data</p></li>
<li><p>sep: A single string indicating the field separator string (delimiter). 
     Values within each comment are separated by this string. 
     Currently accepted values are ";" and ","</p></li>
<li><p>type: A character vector of length <code>n</code> indicating the data type of 
     each data element (column). 
     All values must be one of: "character", "numeric", or "integer".</p></li>
</ul>
 
<p>For instance, for most CARETTA data <code>comment.format</code> should be 
 <code><a href='https://rdrr.io/r/base/list.html'>list(n = 5, sep = ";", type = c("character", "character", "numeric", "numeric", "character"))</a></code></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"airdas_sample.das"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"swfscAirDAS"</span>)
<span class='no'>y.proc</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='airdas_process.html'>airdas_process</a></span>(<span class='no'>y</span>)

<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'>airdas_comments_process</span>(<span class='no'>y.proc</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sam Woodman.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


