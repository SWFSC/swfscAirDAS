---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# swfscAirDAS

<!-- badges: start -->
[![Travis build status](https://travis-ci.org/smwoodman/swfscAirDAS.svg?branch=master)](https://travis-ci.org/smwoodman/swfscAirDAS)
[![AppVeyor build status](https://ci.appveyor.com/api/projects/status/github/smwoodman/swfscAirDAS?branch=master&svg=true)](https://ci.appveyor.com/project/smwoodman/swfscAirDAS)
<!-- badges: end -->

Warning: swfscAirDAS is still under development! Please consult with the author (sam.woodman@noaa.gov) before using it.

This package contains functions for processing and analyzing aerial survey DAS data (AirDAS) generated by TURTLEP and related programs at the Southwest Fisheries Science Center. Functionality includes reading AirDAS data into a data frame, processing this data (extracting state and condition information for each AirDAS event), and summarizing sighting and effort information. Plans for future development include: generating tables summarizing the information in the AirDAS file, plotting AirDAS data, and generating files needed for doing density estimation.

## Installation

You can install swfscAirDAS from [GitHub](https://github.com/smwoodman/swfscAirDAS) with:

``` r
# install.packages("devtools")
devtools::install_github("smwoodman/swfscAirDAS")
```

## AirDAS format

You can download a pdf describing the [AirDAS data format
requirements](https://github.com/smwoodman/swfscAirDAS/blob/master/inst/AirDAS_Format.pdf)
of `swfscAirDAS`.

## Usage

```{r example}
library(swfscAirDAS)
# Get file paths of sample files included in the package
y <- system.file("airdas_sample.das", package = "swfscAirDAS")
y.eff.randpicks <- system.file("airdas_sample_randpicks.csv", package = "swfscAirDAS")

# Read and process AirDAS file, i.e. read AirDAS data into a data frame and add info columns
y.read <- airdas_read(y)
y.proc <- airdas_process(y.read)

# Alternatively, the file path can be passed directly to airdas_process
y.proc <- airdas_process(y) 

# Summarize sighting information
y.sight <- airdas_sight(y.proc)

# Chop continuous effort sections into effort (modeling) segments, 
#   and summarize information for each segment
y.eff <- airdas_effort(y.proc, 3, sp.codes = c("mn", "bm", "qq"), randpicks.load = y.eff.randpicks)
y.eff.segdata <- y.eff[[1]]
y.eff.siteinfo <- y.eff[[2]]
y.eff.randpicks <- y.eff[[3]]
```

To read in and concatenate mutliple AirDAS files, currently you can use the following code:

```{r, eval = FALSE}
y.proc <- do.call(rbind, lapply(list.files("filepath/to/airdas_file_folder", full.names = TRUE), airdas_read))
```
